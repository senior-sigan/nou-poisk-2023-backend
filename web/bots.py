import random
from typing import Tuple
from fastapi import WebSocket
from connection_manager import cm
from crud import create_message
from sqlalchemy.orm import Session
import requests
import json

from list_city import DICT_CITY


async def ping_bot(db: Session, ws: WebSocket, username: str, text: str):
    text = "Pong"
    msg = create_message(db, "@PingBot", text=text)
    await cm.broadcast(
        {
            "type": "message",
            "from": "@PingBot",
            "text": text,
            "message_id": msg.id,
        }
    )


def dice_parse(text: str | None) -> Tuple[int, int]:
    if text is None or len(text) == 0:
        return 1, 6
    parts = text.split(" ")
    if len(parts) == 1:
        return 1, int(parts[0])
    return int(parts[0]), int(parts[1])


async def dice_bot(db: Session, ws: WebSocket, username: str, message: str):
    try:
        nums = dice_parse(message)
        text = f"ğŸ² {str(random.randint(min(nums), max(nums)))}"
    except ValueError:
        text = "ĞŸĞ¸ÑˆĞ¸Ñ‚Ğµ @dice Ğ¸Ğ»Ğ¸ @dice 10 Ğ¸Ğ»Ğ¸ @dice 2 20"
    msg = create_message(db, "@DiceBot", text=text)
    await cm.broadcast(
        {
            "type": "message",
            "from": "@DiceBot",
            "text": text,
            "message_id": msg.id,
        }
    )


async def flip_bot(db: Session, ws: WebSocket, username: str, text: str):
    flip = random.randint(1, 2)
    if flip == 1:
        text = "ğŸŒ• head"
    elif flip == 2:
        text = "ğŸŒ‘ tail"
    msg = create_message(db, "@FlipBot", text=text)
    await cm.broadcast(
        {
            "type": "message",
            "from": "@FlipBot",
            "text": text,
            "message_id": msg.id,
        }
    )


async def weather_bot(db: Session, ws: WebSocket, username: str, text: str):
    text = "This is fine ğŸ‘Œ"
    msg = create_message(db, "@Weather", text=text)
    await cm.broadcast(
        {
            "type": "message",
            "from": "@Weather",
            "text": text,
            "message_id": msg.id,
        }
    )


async def help_bot(db: Session, ws: WebSocket, username: str, text: str):
    messages = [
        "@ping return Pong",
        "@city_game to play city game"
        "@weather return precise weather in your location",
        "@dice return random number from x to y",
        "@goose return goose",
        "@flip to flip a coin",
        "@help return help for you)",
    ]
    for i in messages:
        await cm.broadcast(
            {
                "type": "message",
                "from": "@help",
                "text": i,
            }
        )


# TODO: Ğ±Ğ¾Ñ‚ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ°
# TODO: Ğ±Ğ¾Ñ‚ ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ·Ğ°Ğ¼ĞµĞ½ÑĞµÑ‚ ÑĞ¼Ğ°Ğ¹Ğ»Ñ‹ Ğ½Ğ° ÑĞ¼Ğ¾Ğ´Ğ¶Ğ¸ Ğ¸Ğ»Ğ¸ ĞµÑ‰Ğµ Ñ‡Ñ‚Ğ¾-Ñ‚Ğ¾


async def goose_bot(db: Session, ws: WebSocket, username: str, text: str):
    gooses = [
        [
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–‘Ğ—ĞĞŸĞ£Ğ¡ĞšĞĞ•Ğœâ–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘Ğ“Ğ£Ğ¡Ğ¯â–‘â–„â–€â–€â–€â–„â–‘Ğ ĞĞ‘ĞĞ¢Ğ¯Ğ“Ğ˜â–‘â–‘",
            "â–„â–ˆâ–ˆâ–ˆâ–€â–‘â—â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–â–„â–„â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–„â–€â–’â–’â–€â–€â–€â–€â–„",
            "â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–â–’â–’â–’â–’â–’â–’â–’â–’â–€â–€â–„",
            "â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–â–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–€â–„",
            "â–‘â–‘â–‘â–‘â–€â–„â–‘â–‘â–‘â–‘â–€â–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–€â–„",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–€â–„â–„â–„â–„â–„â–ˆâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–€",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–Œâ–Œâ–‘â–Œâ–Œâ–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–Œâ–Œâ–‘â–Œâ–Œâ–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–„â–Œâ–Œâ–„â–Œâ–Œâ–‘â–‘â–‘â–‘â–‘ .",
        ],
        [
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘Ğ’Ğ—Ğ“Ğ›Ğ¯ĞĞ˜ â–‘â–‘Ğ’ĞĞšĞ Ğ£Ğ“,â–‘â–‘â–‘â–‘â–‘",
            "â–‘ĞĞ“Ğ›Ğ¯ĞĞ˜Ğ¡Ğ¬â–‘ĞĞĞ—ĞĞ”!â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘Ğ“Ğ£Ğ¡Ğ˜â–‘â–„â–€â–€â–€â–„â–‘Ğ¡â–‘Ğ¢ĞĞ‘ĞĞ®â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–€â–‘â–‘â–‘â—â–‘â–€â–ˆâ–ˆâ–ˆâ–„â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–„â–€â–’â–’â–€â–€â–€â–€â–„",
            "â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–â–’â–’â–’â–’â–’â–’â–’â–’â–€â–€â–„",
            "â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–â–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–€â–„",
            "â–‘â–‘â–‘â–‘â–€â–„â–‘â–‘â–‘â–‘â–€â–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–€â–„",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–€â–„â–„â–„â–„â–„â–ˆâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–€â–„",
            "â–‘Ğ¡Ğ’Ğ¯Ğ—ĞĞ¢Ğ¬Ğ¡Ğ¯â–‘â–‘â–Œâ–Œâ–‘â–Œâ–Œâ–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘Ğ¥ĞĞ¢Ğ¯Ğ¢â–‘â–‘â–‘â–‘â–Œâ–Œâ–‘â–Œâ–Œâ–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–„â–Œâ–Œâ–„â–Œâ–Œâ–‘â–‘",
        ],
        [
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–€â–€â–„â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–‘â–„â–€â–’â–’â–’â–’â–€â–„â–‘Ğ—ĞĞŸĞ£Ğ¡ĞšĞĞ•Ğœâ–‘â–‘",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–€â–Œâ–’â–’â–â–€â–‘â–‘Ğ“Ğ£Ğ¡Ğ•ĞŸĞ•Ğ¢Ğ£Ğ¥Ğâ–‘â–‘",
            "â–„â–ˆâ–ˆâ–ˆâ–€â–‘â—â–‘â–‘â–‘â–Œâ–‘â–‘â–‘Ğ ĞĞ‘ĞĞ¢Ğ¯Ğ“Ğ˜â–‘â–‘â–‘",
            "â–‘â–‘â–â–€â–Œâ–‘â–‘â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–€â–€â–€â–„â–„",
            "â–‘â–â–‘â–‘â–â–‘â–‘â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–‘â–„â–ˆâ–€",
            "â–‘â–â–„â–„â–Œâ–‘â–‘â–‘â–‘â–‘â–â–„â–„â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–‘â–‘â–„â–„â–€â–€â–€â–€â–„",
            "â–‘â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–„â–€â–’â–’â–€â–€â–€â–€â–„â–€â–‘â–„â–€â–‘â–„â–„â–„â–€â–€",
            "â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–â–’â–’â–’â–’â–’â–’â–’â–’â–€â–€â–„â–‘â–‘â–€â–„â–„â–„â–‘â–„",
            "â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–â–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–€â–„â–‘â–„â–„â–€â–€",
            "â–‘â–‘â–‘â–‘â–€â–„â–‘â–‘â–‘â–‘â–€â–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–€â–„â–‘",
            "â–‘â–‘â–‘â–‘â–‘â–€â–„â–„â–‘â–‘â–‘â–ˆâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–€â–„",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–€â–€â–€â–„â–„â–„â–„â–„â–„â–„â–„â–€â–€â–‘",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–Œâ–Œâ–‘â–Œâ–Œ",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–„â–Œâ–Œâ–„â–Œâ–Œ",
        ],
        [
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘Ğ—ĞĞŸĞ£Ğ¡ĞšĞĞ•Ğœâ–‘â–‘Ğ“Ğ£Ğ¡Ğ¯-Ğ“Ğ˜Ğ”Ğ Ğ£â–‘",
            "â–‘â–‘â–‘â–‘â–‘â–‘Ğ ĞĞ‘ĞĞ¢Ğ¯Ğ“Ğ˜â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–„â–€â–€â–€â–„â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–„â–ˆâ–ˆâ–ˆâ–€â–‘â—â–‘â–„â–€â–€â–€â–„â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–„â–ˆâ–ˆâ–ˆâ–€â–‘â—â–‘â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–Œâ–‘â–„â–€â–€â–€â–„â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–‘",
            "â–„â–ˆâ–ˆâ–ˆâ–€â–‘â—â–‘â–‘â–‘â–Œâ–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–â–„â–„â–Œâ–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–â–„â–„â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–„â–€â–’â–’â–€â–€â–€â–€â–„â–‘â–‘",
            "â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–â–’â–’â–’â–’â–’â–’â–’â–’â–€â–€â–„",
            "â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–â–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–€â–„",
            "â–‘â–‘â–‘â–‘â–€â–„â–‘â–‘â–‘â–‘â–€â–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–€â–„",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–€â–„â–„â–„â–„â–„â–ˆâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–€â–„",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–Œâ–Œâ–‘â–Œâ–Œâ–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–Œâ–Œâ–‘â–Œâ–Œâ–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–„â–Œâ–Œâ–„â–Œâ–Œâ–‘â–‘â–‘â–‘â–‘",
        ],
        [
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘Ğ—ĞĞŸĞ£Ğ¡ĞšĞĞ•Ğœâ–‘â–‘ĞœĞĞ©ĞĞĞ“Ğâ–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘Ğ“Ğ£Ğ¡Ğ¯-Ğ“Ğ˜Ğ”Ğ Ğ£â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–‘â–„â–€â–€â–€â–„â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–„â–„â–‘â–‘",
            "â–„â–ˆâ–ˆâ–ˆâ–€â–‘â—â–‘â–„â–€â–€â–€â–„â–‘â–‘â–‘â–„â–€â–‘â–‘â–ˆâ–‘",
            "â–‘â–‘â–„â–ˆâ–ˆâ–ˆâ–€â–‘â—â–‘â–‘â–‘â–‘â–Œâ–„â–€â–‘â–‘â–„â–€â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–â–‘â–„â–€â–€â–€â–„â–‘â–‘â–‘â–‘â–‘â–„â–€â–‘â–‘â–‘â–‘",
            "â–„â–ˆâ–ˆâ–ˆâ–€â–‘â—â–‘â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–€â–„â–‘â–‘â–‘",
            "â–„â–„â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–â–„â–„â–€â–„â–„â–€â–„â–€â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–„",
            "â–ˆâ–‘â–‘â–€â–„â–‘â–‘â–‘â–‘â–„â–€â–’â–’â–€â–€â–€â–€â–„â–‘â–‘â–‘â–‘â–‘â–„â–€â–‘â–‘â–ˆ",
            "â–‘â–€â–„â–‘â–‘â–€â–„â–‘â–â–’â–’â–’â–’â–’â–’â–’â–’â–€â–€â–„â–„â–„â–„â–€â–‘â–‘â–„â–€",
            "â–‘â–‘â–‘â–€â–„â–‘â–‘â–€â–â–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–‘â–‘â–„â–€",
            "â–‘â–‘â–‘â–„â–€â–‘â–‘â–‘â–‘â–‘â–€â–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–€â–„",
            "â–‘â–‘â–‘â–€â–„â–€â–„â–„â–€â–„â–„â–„â–ˆâ–„â–„â–„â–„â–„â–„â–„â–€â–„â–„â–€â–„â–€",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–Œâ–Œâ–‘â–Œâ–Œâ–‘â–Œâ–Œâ–‘â–Œâ–Œâ–‘â–‘â–Œâ–Œâ–‘â–Œâ–Œâ–‘",
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–Œâ–Œâ–‘â–Œâ–Œâ–‘â–Œâ–Œâ–‘â–Œâ–Œâ–‘â–‘â–Œâ–Œâ–‘â–Œâ–Œâ–‘",
            "â–‘â–‘â–‘â–‘â–‘â–„â–„â–Œâ–Œâ–„â–Œâ–Œâ–„â–Œâ–Œâ–„â–Œâ–Œâ–‘â–„â–Œâ–Œâ–„â–Œâ–Œâ–‘",
        ],
        [
            "â”€â”€â”€â”€â”€â”€â–„â–Œâ–â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–Œ",
            "â”€â”€â”€â–„â–„â–ˆâ–ˆâ–Œâ–ˆâ–‘Ğ’Ğ•Ğ—ĞĞœâ–„â–€â–€â–€â–„â–‘Ğ“Ğ£Ğ¡Ğ•Ğ™â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â”€â”€â”€â–ˆâ–ˆâ–ˆâ–ˆâ–Œâ–ˆâ–„â–ˆâ–ˆâ–ˆâ–€â–‘â—â–‘â–„â–€â–€â–€â–„â–‘â–‘Ğ ĞĞ‘ĞĞ¢Ğ¯Ğ“Ğ˜â–‘",
            "â”€â”€â–ˆâ–ˆâ–‘â–‘â–ˆâ–Œâ–ˆâ–‘â–‘â–„â–ˆâ–ˆâ–ˆâ–€â–‘â—â–‘â–‘â–„â–€â–€â–€â–„â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â”€â–ˆâ–ˆâ–‘â–‘â–‘â–ˆâ–Œâ–ˆâ–‘â–‘â–‘â–‘â–â–‘â–„â–€â–€â–€â–Œâ–‘â–‘â–‘â–‘â—â–‘â–€â–ˆâ–ˆâ–ˆâ–„â–‘",
            "â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œâ–ˆâ–„â–ˆâ–ˆâ–ˆâ–€â–‘â—â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œâ–ˆâ–‘â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œâ–ˆâ–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–Œ",
            "â–€(@)â–€â–€â–€â–€â–€â–€â–€(@)(@)â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€(@)â–€(@)",
        ],
        [
            "â–‘â–‘â–‘â–‘â–‘â–„â–€â–€â–€â–„â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–Œ",
            "â–„â–ˆâ–ˆâ–ˆâ–€â–‘â—â–‘â–‘â–‘â–Œâ–‘Ğ—ĞĞŸĞ£Ğ¡ĞšĞĞ•Ğœâ–‘Ğ“Ğ£Ğ¡Ğ¯-Ğ¤Ğ£Ğ Ğ£â–‘â–‘â–‘",
            "â–ˆâ–ˆâ–ˆâ–ˆâ–Œâ–‘â–‘â–‘â–‘â–‘â–â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–„â–Œ",
            "â–€(@)â–€â–€â–€â–€â–€â–€â–€(@)(@)â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€(@)â–€",
        ],
        [
            "â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘Ğ—ĞĞŸĞ£Ğ¡ĞšĞĞ•Ğœâ–‘Ğ“Ğ£Ğ¡Ğ•Ğ™-Ğ ĞĞ—Ğ’Ğ•Ğ”Ğ§Ğ˜ĞšĞĞ’â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–‘â–„â–€â–€â–€â–„â–‘â–‘â–‘â–„â–€â–€â–€â–€â–„â–‘â–‘â–‘â–„â–€â–€â–€â–„â–‘â–‘â–‘â–‘â–‘",
            "â–„â–ˆâ–ˆâ–ˆâ–€â–‘â—â–‘â–‘â–‘â–Œâ–‘â–0â–‘â–‘â–‘â–‘0â–Œâ–‘â–â–‘â–‘â–‘â—â–‘â–€â–ˆâ–ˆâ–ˆâ–„",
            "â–‘â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–â–‘â–Œâ–‘â–â–€â–€â–Œâ–‘â–â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘",
            "â–‘â–‘â–‘â–‘â–â–‘â–‘â–‘â–‘â–‘â–â–‘â–Œâ–‘â–Œâ–’â–’â–â–‘â–â–‘â–Œâ–‘â–‘â–‘â–‘â–‘â–Œâ–‘â–‘â–‘â–‘",
        ],
    ]
    for i in gooses[random.randint(0, len(gooses) - 1)]:
        msg = create_message(db, "@GooseBot", text=i)
        await cm.broadcast(
            {
                "type": "message",
                "from": "@GooseBot",
                "text": i,
                "message_id": msg.id,
            }
        )


# Ğ±Ğ¾Ñ‚, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ ÑƒĞ¼ĞµĞµÑ‚ Ğ¸Ğ³Ñ€Ğ°Ñ‚ÑŒ Ğ² Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ°: ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ ĞºĞ¾Ñ€Ñ‚ĞµĞ¶, Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°Ñ‚ÑŒ Ğ¸Ğ· Ğ½Ğ¸Ñ… 5 Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ¾, Ğ¾ĞºĞ°Ğ½Ñ‡Ğ¸Ğ²Ğ°ÑÑ‰Ğ¸ĞµÑÑ Ğ½Ğ° Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½ÑƒÑ Ğ±ÑƒĞºĞ²Ñƒ Ğ¸ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾ Ğ±Ñ€Ğ°Ñ‚ÑŒ 1 Ğ³Ğ¾Ñ€Ğ¾Ğ´, Ğ° Ğ·Ğ°Ñ‚ĞµĞ¼ ÑƒĞ´Ğ°Ğ»ÑÑ‚ÑŒ
async def city_game(db: Session, ws: WebSocket, username: str, text: str):
    used_city = set()
    flag = False
    if flag == False and text is not None:
        flag = False
        user_city = text.replace(" ", "")
        user_city = user_city[0].upper() + user_city[1 : len(user_city)]
        cities_ping = DICT_CITY.get(user_city[0].upper())
        # Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ°^ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ°-Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°
        cities_pong = DICT_CITY.get(user_city[-1].upper())
        bot_city = random.choice(cities_pong)

        if user_city not in cities_ping:
            text = "ĞĞĞĞĞĞ, Ğ½Ğ•Ñ‚Ñƒ Ñ‚Ğ°ĞºĞĞ³Ğ¾ Ğ“Ğ¾Ğ Ğ¾Ğ”Ğ!!!!!!"
            flag = True

        elif user_city in used_city:
            text = "Ğ’Ñ‹ ÑƒĞ¶Ğµ Ğ²Ğ²Ğ¾Ğ´Ğ¸Ğ»Ğ¸ ÑÑ‚Ğ¾Ñ‚ Ğ³Ğ¾Ñ€Ğ¾Ğ´"
            flag = True

        elif text.lower() == "Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ³Ñ€Ğ°Ğ»":
            text = "Ğ¯ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸Ğ», :)"
            flag = True
        else:
            cities_pong.remove(bot_city)
            cities_ping.remove(user_city)
        if cities_pong == "":
            text = "Ğ’Ñ‹ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸Ğ»Ğ¸, :("
            flag = True

        used_city.add(user_city)
        used_city.add(bot_city)
        create_message(db, "@CityGame", text=text)
        await cm.broadcast(
            {
                "type": "message",
                "from": "@city_game",
                "text": bot_city,
            }
        )
    else:
        create_message(db, "City_Game", text=text)
        await cm.broadcast(
            {
                "type": "message",
                "from": "@city_game",
                "text": text,
            }
        )

async def music_bot(db: Session, ws: WebSocket, username: str, text: str):
    base = "http://192.168.1.117:5000"
    res = requests.get(f"{base}?name={text}")
    data = json.loads(res.content.decode())
    path = data.get('path')
    if path is None:
        await cm.broadcast(
            {
                "from": "MusicBot",
                "type": "message",
                "text": "Music not found :(",
            }
        )
        return

    await cm.broadcast(
        {
            "from": "MusicBot",
            "type": "message",
            "file": {
                "content_type": "video",
                "path": f"{base}/music/{path}",
            },
        }
    )


BOTS = {
    "ping": ping_bot,
    # "city_game": city_game,
    "dice": dice_bot,
    "weather": weather_bot,
    "flip": flip_bot,
    "help": help_bot,
    "goose": goose_bot,
    "music": music_bot,
}
